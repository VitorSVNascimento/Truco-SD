<!DOCTYPE html>
<html>
<head>
    <title>Chat Room</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>
<body>
    <input type="text" id="username" placeholder="Username">
    <input type="text" id="room" placeholder="Room">
    <label for="team">Time:</label>

    <select name="team" id="team">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">Qualquer um</option>
    </select>

    <button id="createbutton">Create Room</button>
    <button id="joinbutton">Join Room</button>
    <button id="startbutton">Start Room</button>
    
    <br>
    <input type="text" id="id_card" placeholder="Card">
    <button id="sendCard">sendCard</button>

    <ul id="messages"></ul>
    <input type="text" id="myMessage">
    <button id="sendbutton">Send</button>
<script type="text/javascript">
$(document).ready(function() {

    var socket = io.connect('http://127.0.0.1:22000');

    $('#joinbutton').on('click', function() {
        var username = $('#username').val();
        var room = $('#room').val();
        var team = $('#team').val();
        console.log("room="+room);
        socket.emit('connect_game', {username: username, room: room, team: team});
    });

    $('#startbutton').on('click', function() {
        var room = $('#room').val();
        socket.emit('start_game');
    });

    $('#createbutton').on('click', function() {
        var username = $('#username').val();
        socket.emit('create_game', {username: username});
    });

    socket.on('room_message', function(msg) {
        $("#messages").append('<li>'+msg+'</li>');
        console.log('Received message');
    });

    socket.on('your_cards',function(msg){
        $("#messages").append('<li>'+msg+'</li>');
        console.log(msg);
    })

    $('#sendbutton').on('click', function() {
        var room = $('#room').val();
        socket.emit('send message', {message: $('#myMessage').val(),room : room});
        $('#myMessage').val('');
    });

    $('#sendCard').on('click', function(){
        var id_card = $('#id_card').val();
        socket.emit('throw_card', {card_code : id_card});
    });

    socket.on('throwed_card',function(msg){
        $("#messages").append('<li>'+msg+'</li>');
        console.log(msg);
    })

    socket.on('connect_successfully', function(data){
        console.log(data)
    })

    socket.on('round_order', function(data){
        console.log(data)
    })


});
</script>

</body>
</html>